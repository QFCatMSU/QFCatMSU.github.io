<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
	
	<meta charset="UTF-8">
	<script type="text/javascript"> document.write('<'+'!--'); </script>
       <link rel="stylesheet" type="text/css" href="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/../Programming/Release/editor.css">
    <!-- -->
	<script src="https://cdn.jsdelivr.net/gh/QFCatMSU/OnlineClassBackEnd/module.js">
	</script>
</head><body><h1>ADMB/TMB Full Installation for Windows</h1>
<h2>Author</h2>
<p><strong><a href="https://www.canr.msu.edu/people/charles-belinsky?roleURL=charles_belinsky" target="_blank" rel="noopener">Charlie Belinsky</a></strong></p>
<p><a href="https://www.canr.msu.edu/qfc/" target="_blank" rel="noopener">Quantitative Fisheries Center</a></p>
<p><a href="https://www.msu.edu" target="_blank" rel="noopener">Michigan State University</a></p>
<p><a href="mailto:belinsky@msu.edu">belinsky@msu.edu</a></p>
<p>248-383-5611</p>
<p>&nbsp;</p>
<p class="note">Note: Mac installation of this software is much more involved – contact Charlie for instructions.</p>
<p class="note"></p>
<p><a href="https://github.com/QFCatMSU/ADMB-TMB-Install" target="_blank" rel="noopener">The project is maintained on Github</a>.&nbsp;</p>
<h3>Future updates to this document</h3>
<ul>
<li>RTMB instructions</li>
</ul>
<h2>Overview</h2>
<p>These procedures in the document install the following software and was tested on <em class="hl">10/17/23</em>:</p>
<ul>
<li>R 4.3.1</li>
<li>Rtools 43 (for the CPP compilers)</li>
<li>RStudio 2023.06.1 Build 524</li>
<li>TMB package for R 1.9.6</li>
<li>ADMB 13.1</li>
<li>Emacs 27.2 (<em class="hl">Emacs versions 28 and up will not work</em>)</li>
<li>Emacs configuration files
<ul>
<li>These files provide the syntax highlighting in Emacs for both ADMB and TMB and set up the Environment</li>
</ul>
</li>
<li>admb2r.cpp in the ADMB folder</li>
</ul>
<p></p>
<p id="r-env" class="ref">Appendix: Editing the PATH Environment</p>
<h3>Admin access to your computer</h3>
<p>The installation procedures will do the following that<em class="hl"> might require higher administrative access</em> to your computer than your user account has:</p>
<ul>
<li>Install programs (R, RStudio, Rtools, ADMB, Emacs)</li>
<li>Install programs directly to the <b>C:</b> drive (ADMB, RTools)</li>
<li>Install programs not validated by Microsoft (ADMB)</li>
<li>Run a batch file (PATH.bat)</li>
</ul>
<h2>Viewing hidden files and extensions in Windows (optional)</h2>
<p>This section is useful for this installation and for any programming you do on your computer.</p>
<p class="note">Note: images in this document can be resized by clicking on them</p>
<p></p>
<p>1) Open a File Explorer window and in...</p>
<p><strong>&nbsp;&nbsp;&nbsp; Windows 10</strong>: Click <b><i>View</i></b> ➔ <b><i>Options</i></b> ➔&nbsp;<b><i>Change folder and search options</i></b></p>
<p><b><i>&nbsp;&nbsp;&nbsp; <img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-Windows10FolderOptions.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></i></b></p>
<p class="fig">Accessing folder options in Windows 10</p>
<p><strong></strong></p>
<p><strong>&nbsp;&nbsp;&nbsp; Windows 11</strong>: click 3 dots <b>( … ) ➔&nbsp;</b><b><i>Options</i></b></p>
<p>&nbsp; &nbsp; <img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-Windows11FolderOptions.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Accessing folder options in Windows 11</p>
<p></p>
<p>2) Both <strong>Windows 10 </strong>and <strong>11</strong>:</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li>Click <b><i>View</i></b> tab</li>
<li>Check <b><i>Show hidden files…</i></b></li>
<li>Uncheck <b><i>Hide extensions for known file types</i></b></li>
<li>click <b><i>OK</i></b></li>
</ul>
</li>
</ul>
<p>&nbsp;&nbsp;&nbsp; <img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-FolderOptions.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Showing hidden files and hiding extensions</p>
<h2>Software Installation</h2>
<p class="hl">You can use the default installation options for all applications.</p>
<p class="hl"></p>
<p>Steps 1-4 are only needed for TMB, step 5 is only needed for ADMB, steps 6 and 7 are needed for both ADMB and TMB.</p>
<ol>
<li><a href="https://cran.r-project.org/bin/windows/base/">Download</a> and Install R (you need to have at least version 4.3)<br><br></li>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html" target="_blank" rel="noopener">Download </a>and install Rtools43 (you need to have at least version 43, which is the latest as of this writing)<br>
<ul>
<li>Click on <b><i>Rrools43 Installer</i></b> in <b><i>Installing Rtools43</i></b> section<br><br></li>
</ul>
</li>
<li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwiW0dHZ7Yn_AhV9jokEHRZAB9kQFnoECBMQAQ&amp;url=https%3A%2F%2Fposit.co%2Fdownload%2Frstudio-desktop%2F&amp;usg=AOvVaw00E_pTzIH4wAv6GUeuh7hj" target="_blank" rel="noopener">Download </a>and install RStudio (you need to have a version from 2022 or later)<br><br></li>
<li>Open RStudio and install the TMB package
<ul>
<li>In RStudio:<em> <strong>Tools&nbsp;</strong></em>➔&nbsp;<em><strong>Install Packages</strong></em>… ➔ type&nbsp;<em><strong>TMB </strong></em>in <b><i>Packages</i></b> textbox ➔&nbsp;<em><strong>Install</strong></em></li>
<li><em class="hl">Close RStudio</em> after installing package<br><br></li>
</ul>
</li>
<li><a href="http://www.admb-project.org/downloads/admb-13.1/QuickStartWindows.html" title="">Download</a> and install <b><i>ADMB-13.1-windows.exe</i></b>
<ul>
<li style="list-style: none;">
<ul>
<li class="note">Alternatively, you can <a href="http://www.admb-project.org/downloads/admb-12.3/">download</a> <b><i>ADMB-12.3-windows.exe</i></b> (under <b><i>Windows</i></b> header)</li>
<li>When installing, you will likely get a <b><i>Windows protected your PC</i></b> screen, if so:</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li style="list-style: none;">
<ul>
<li style="list-style: none;">
<ul>
<li style="list-style: none;">
<ol>
<li>click <b><i>More info</i></b></li>
<li>click <b><i>Run anyway<br><br></i></b></li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="6">
<li><a href="http://ftpmirror.gnu.org/emacs/windows/emacs-27">Download</a> and install <b><i>emacs-27.2-x86_64-installer.exe<br><br></i></b></li>
<li><a href="https://github.com/QFCatMSU/ADMB-TMB-Install" target="_blank" rel="noopener">Go to ADMB-TMB-Install GitHub page</a>
<ul>
<li>Click on green <em><strong>Code </strong></em>button and choose <em><strong>Download Zip</strong></em>
<ul>
<li>This will download a zipped file named <em><strong>ADMB-TMB-Install-main.zip</strong></em></li>
</ul>
</li>
<li>Unzip <b><i>ADMB-TMB-Install-main.zip</i></b> (right-click, <b><i>Extract All </i></b>then <b><i>Extract</i></b>).&nbsp;</li>
<li>Execute (double-click) <b><i>Path.bat</i></b>
<ul>
<li>You will likely get a <b><i>Windows protected your PC</i></b> screen, if so:</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li style="list-style-type: none;">
<ul>
<li style="list-style-type: none;">
<ol>
<li style="list-style-type: none;">
<ol>
<li style="list-style-type: none;">
<ol>
<li>click <b><i>More info</i></b></li>
<li>click <b><i>Run anyway</i></b><b><i></i></b></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>If this does not work you can <em id="r-path" class="ref">manually install the path files</em> (this link also includes more about the files)<br><br><em></em></li>
</ul>
</li>
</ol>
<ol start="8">
<li>Restart computer
<ul>
<li>As far as I know, this step is not needed -- but I keep it here just to be safe.</li>
</ul>
</li>
</ol>
<h2>Have Emacs open TPL files by default (optional)</h2>
<ul>
<li>Right-click on any <b><i>*.tpl</i></b> file
<ul>
<li>there is one in the folder you just extracted <em><strong>➔</strong></em> <em><strong>examples ➔ simple ➔ simple.tpl</strong></em></li>
</ul>
</li>
<li>Choose <b><i>Open With</i></b></li>
<li><strong>Windows 10:</strong> <br>
<ul style="list-style-type: circle;">
<li>At bottom, click <b><i>Choose an app on your PC</i></b></li>
<li>The Path is: <strong class="hl">C:\Program Files\Emacs\x86_64\bin\runemacs.exe</strong></li>
<li>Click <b><i>Open</i></b></li>
<li>Click <b><i>Always</i></b></li>
</ul>
</li>
<li><strong>Windows 11:</strong>
<ul style="list-style-type: circle;">
<li>go to bottom and click on <b><i>Choose another<br></i></b></li>
<li>At bottom, click <b><i>Choose an app on your PC</i></b></li>
<li>The Path is: <em><strong class="hl">C:\Program Files\Emacs\x86_64\bin\runemacs.exe</strong></em></li>
<li>Click <b><i>OK</i></b></li>
</ul>
</li>
</ul>
<p></p>
<p class="note">Note: the same procedures will work if you want emacs to be the default program for CPP files</p>
<h2>Testing out ADMB</h2>
<ul>
<li>In folder you just unzipped, double-click <b><i>emacs </i></b><b><i>➔ examples</i></b> <b><i>➔ simple</i></b> <b><i>➔ simple.tpl</i></b></li>
<li>Open <b><i>simple.tpl</i></b> in <b><i>Emacs</i></b></li>
<li>Click <b><i>Translate</i></b> (button 1), <b><i>Build</i></b> (button 2), and <b><i>Run</i></b> (button 3)
<ul style="list-style-type: circle;">
<li>Make sure you wait for steps to complete</li>
</ul>
</li>
<li>If the Emacs panels look like this after <b><i>Run,</i></b> then ADMB is properly installed:</li>
</ul>
<p>&nbsp; <img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-ADMBTest.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Translate, Build, and Run buttons in ADMB.&nbsp; This view is from ADMB 12.3 -- the view from 13.1 is slightly different</p>
<h2>Testing out TMB</h2>
<ul>
<li>In folder you just unzipped, double-click <b><i>emacs </i></b><b><i>➔ examples </i></b><b><i>➔ mini </i></b><b><i>➔ mini.cpp</i></b></li>
<li>Open <b><i>mini.cpp</i></b> in <b><i>Emacs</i></b></li>
</ul>
<ul>
<li>Click <b><i>Clean</i></b> (button 1), <b><i>Compile</i></b> (button 2), and <b><i>Run</i></b> (button 3)
<ul style="list-style-type: circle;">
<li>Make sure you wait for each step to complete</li>
<li><b><i>Compile</i></b> take a minute or two</li>
</ul>
</li>
<li>If the Emacs panels look like this after <b><i>Run,</i></b> then TMB is properly installed:</li>
</ul>
<p>&nbsp; <img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-TMBTest.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Clean, Compile, and Run buttons in TMB</p>
<p></p>
<h3>Package inconsistency error</h3>
<p>If you see this message when compiling a TMB program:</p>
<blockquote>
<p>Warning message:<br>In checkMatrixPackageVersion() : Package version inconsistency detected.<br>TMB was built with <em class="hl">Matrix version 1.5.4.1</em><br>Current <em class="hl">Matrix version is 1.5.4</em><br>Please re-install 'TMB' from source using install.packages('TMB', type = 'source') or ask CRAN for a binary version of 'TMB' matching CRAN's 'Matrix' package<br>using C++ compiler: 'G__~1.EXE (GCC) 12.2.0'</p>
</blockquote>
<p></p>
<p>Do not follow the instructions given.&nbsp; Instead just update or reinstall the outdated package (in this case, <em><strong>Matrix</strong></em>).&nbsp; This is only necessary if the the script does not work because of the outdated package.</p>
<h2 id="env">Appendix 1: User Environment PATH</h2>
<p>The User Environment PATH variable is not needed anymore.&nbsp; I added this to the emacs configuration files.&nbsp;</p>
<p></p>
<p>However, there is still a chance that the User Environment PATH has been set by a previously installed program and that PATH could interfere with ADMB and TMB's operation.&nbsp; This is most likely only going to be true if you previously installed ADStudio.&nbsp;</p>
<p></p>
<p>You can see the User Environment PATH by doing a Windows search for <em><strong>Environment </strong></em>and choosing <em><strong>Edit the system environment variables</strong></em>.</p>
<p></p>
<p>That will open the <em><strong>System Properties</strong></em> window on the <em><strong>Advanced </strong></em>tab-- click on the <em><strong>Environment... </strong></em>button:</p>
<p><img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/AT_SystemProp.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">The Advanced System Properties tab</p>
<p></p>
<p>Then double-click on <em><strong>Path </strong></em>in the <em><strong>User variables </strong></em>section:</p>
<p><img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/EnvironmentVars.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Path variables</p>
<p></p>
<p>Delete any references to older versions of ADMB, TMB, or ADStudio.&nbsp; You can also safely delete the references to the current ADMB version -- they are not needed.</p>
<h2 id="path">Appendix 2: manually copy configuration files and admb2r.cpp</h2>
<p>The extracted folder <em><strong>ADMB-TMB-Install-main</strong></em> contains:</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li>An executable file called <b><i>PATH.bat&nbsp;</i></b>(which installs the folders and files below)</li>
<li>A folder called<b><i> emacsConfigFiles</i></b> that gets installed to the emacs folder when <b><i>PATH.bat</i></b> is executed</li>
<li>A folder called <b><i>Examples</i></b>, which contains ADMB and TMB scripts that are used in this document to test the installation.</li>
<li><em><strong>admb2r.cpp</strong></em> -- a commonly used ADMB script file that is not included with ADMB</li>
</ul>
</li>
</ul>
<p></p>
<p><em><strong>PATH.bat</strong></em> is a batch file that copies the emacs configuration files and&nbsp;<em><strong>admb2r.cpp</strong></em> to the correct locations.</p>
<p></p>
<p>The following are instructions to manually copy the files -- <em class="hl">this is only needed if PATH.bat does not work</em>.</p>
<h3>Copy emacs configuration files</h3>
<p>Inside <b><i>ADMB-TMB-Install-main</i></b>, there is a folder named <b><i>emacsConfigFiles</i></b>.&nbsp; You need to copy the contents inside the <em><strong>emacsConfigFiles </strong></em>folder (a file named <b><i>.emacs</i></b> and a folder named <b><i>emacs</i></b>) to the user’s <b><i>appdata</i></b> folder.</p>
<p>&nbsp;</p>
<p>The easiest way to get to the user's <b><i>appdata</i></b> folder is to type <b>%appdata%</b> in a File Explorer window and hit enter.&nbsp; Or, you can go directly to the folder:<em><strong> C:\Users\&lt;yourUserName&gt;\AppData\Roaming</strong></em>.&nbsp; Move both the <em><strong>emacs </strong></em>folder and <em><strong>.emacs</strong></em> file to this folder:</p>
<p><img src="https://d2l.msu.edu/content/DEVELOPMENT/2018/courses/DEV-belinsky-2018-BackendTest/ADMB-TMB-Install/Images/A-T-CopyFileManually.png" alt="" data-d2l-editor-default-img-style="true" style="max-width: 100%;" class="fs"></p>
<p class="fig">Location to copy the emacs configuration files</p>
<h3>Copy admb2r.cpp</h3>
<p>The file <em><strong>admb2r.cpp</strong></em> is used in ADMB scripts but it does not come with ADMB.&nbsp;</p>
<p></p>
<p>You can add it to ADMB by copying <em><strong>admb2r.cpp</strong></em> from the <b><i>ADMB-TMB-Install-main</i></b> folder to the following locations:</p>
<ul>
<li><strong>c:\ADMB-13.1\include</strong></li>
<li><strong>c:\ADMB-13.1\include\contrib</strong>&nbsp; (I am not sure it is necessary to copy it here)</li>
</ul>
<p></p>
<p class="note">Note: If you are using a different version of ADMB then replace <strong>13.1</strong> with the version you are using</p>
<p></p></body></html>